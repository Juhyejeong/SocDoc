<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="detail">

	<select id="hospitalDetail" parameterType="String" resultType="com.synergy.socdoc.member.HpInfoVO">
		select h.hpseq, h.hpname, h.address, h.phone, h.dept,h.info, h.mainimg, h.subimg1, h.subimg2, r.avg
		from hospitalInfo h join (select hpseq, trunc(avg(rating)) as avg from hospitalreview group by hpseq) r
		on h.hpseq = r.hpseq 
		where h.hpseq=#{hpSeq}
	</select>

</mapper>
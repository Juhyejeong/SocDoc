<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="admin">
	
	<select id="selectMemberList" resultType="com.synergy.socdoc.member.MemberVO">
		select userid, name, birthDate, email, phone, registerDate, status
		from member
	</select>
 	
	<select id="selectNoticeList" resultType="com.synergy.socdoc.member.NoticeVO">
		select noticeSeq, subject, regDate
		from noticeBoard
		order by regDate desc 
	</select>
 	
	<select id="selectHealthList" resultType="com.synergy.socdoc.member.HealthInfoVO">
		select infoSeq, subject, regDate
		from infoBoard
		order by regDate desc 
	</select>
 	
	<select id="selectQnAList" resultType="com.synergy.socdoc.member.QnaBoardVO">
		select qnaSeq, subject, userid, regDate, status
		from qnaBoard
		order by regDate desc 
	</select>
	
	<select id="getView" parameterType="String" resultType="com.synergy.socdoc.member.NoticeVO">
		select subject, content
		from noticeBoard
		where noticeSeq = #{noticeSeq}
	</select>
 	
 	
 	<select id="getTotalCount" parameterType="HashMap" resultType="int">
		select count(*)
		from member
		where status in (1,0)
			<if test='searchWord != ""'>
				and lower(${searchType}) like '%' || lower(#{searchWord}) || '%'
			</if>
	</select>

	<select id="memberListSearchWithPaging" parameterType="HashMap" resultType="com.synergy.socdoc.member.MemberVO">
		select rno, userid, name, birthDate, email, phone, registerDate, status
		from
	    ( 
	        select rownum as rno, userid, name, birthDate, email, phone, registerDate, status 
			from 
			(
				select userid, name, birthDate, email, phone, registerDate, status
				from member
				where status in (1,0)
				<if test='searchWord != ""'>
					and ${searchType} like '%' || #{searchWord} || '%'
				</if>
			) V
		)T
		where rno between #{startRno} and #{endRno}
	</select>
 	
 	 
</mapper>